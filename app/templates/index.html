<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Company Search</title>
    <script>
        async function searchCompanies() {
            const name = document.getElementById('name').value;
            const registration_code = document.getElementById('registration_code').value;
            const shareholder_name = document.getElementById('shareholder_name').value;
            const shareholder_code = document.getElementById('shareholder_code').value;

            const params = new URLSearchParams({
                name,
                registration_code,
                shareholder_name,
                shareholder_code
            });

            const response = await fetch(`/search?${params.toString()}`);
            const results = await response.json();

            const resultsContainer = document.getElementById('results');
            resultsContainer.innerHTML = '';

            results.forEach(company => {
                const div = document.createElement('div');
                const link = document.createElement('a');
                link.href = `/company/${company.registration_code}`;
                link.textContent = `Name: ${company.name}, Registration Code: ${company.registration_code}`;
                div.appendChild(link);
                resultsContainer.appendChild(div);
            });
        }
    </script>
</head>
<body>
    <h1>Search for Companies</h1>
    <form onsubmit="event.preventDefault(); searchCompanies();">
        <label for="name">Company Name:</label>
        <input type="text" id="name" name="name"><br>
        <label for="registration_code">Registration Code:</label>
        <input type="text" id="registration_code" name="registration_code"><br>
        <label for="shareholder_name">Shareholder Name:</label>
        <input type="text" id="shareholder_name" name="shareholder_name"><br>
        <label for="shareholder_code">Shareholder Code:</label>
        <input type="text" id="shareholder_code" name="shareholder_code"><br>
        <button type="submit">Search</button>
    </form>
    <div id="results"></div>
</body>
</html>